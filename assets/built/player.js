var currentTime,currentId,playerPaused,playerPlaying;function player(e){"use strict";var t=e||!1,a=$(".audioPlayer"),r=a.find("audio"),n=a.hasClass("external"),i=html.hasClass("player-opened"),d=1,o=a.find(".post-image"),u=a.find(".post-header .title .link"),l=a.find(".post-header .meta"),c=a.find(".progress"),s={current:a.find(".time .current"),duration:a.find(".time .duration")},f=a.find(".button.backward"),p=a.find(".button.forward"),m=a.find(".button.speed"),y=a.find(".button.close");if(t){if(console.log("reattach"),n&&playerPlaying&&!i?(console.log("open external player"),html.addClass("player-opened")):!n&&i&&(console.log("close external player"),html.removeClass("player-opened")),currentTime&&(n||a.data("id")==currentId)){if(s.current.text(formatTime(currentTime)),r[0].currentTime=currentTime,n)T($('.episode[data-id="'+currentId+'"]'));playerPlaying&&(r.attr("src")||r.attr("src",$('.episode[data-id="'+currentId+'"]').data("url")),play(currentId))}t=!1}else currentTime=0,s.current.text(formatTime(0));function T(e){var t=e.find(".post-image").data("srcset");t&&(o.attr("data-srcset",t),lazySizes.loader.unveil(o[0]));var a=e.find(".link").text();a&&u.text(a);var r=e.find(".meta").html();r&&l.html(r)}$(".js-play").on("click",(function(){var e,t,a=jQuery(this),i=a.closest(".episode");i.length?t=i.data("id"):currentId?(t=currentId,i=$('.episode[data-id="'+t+'"]')):console.log("No episode to play..."),e=i.data("url"),t!==currentId&&(a.find("i.fa").hide(),a.find("i.loader").show(),e&&r.attr("src",e),n&&T(i),setPlayButtonState("play",currentId)),n&&html.addClass("player-opened"),r[0]&&r[0].paused?play(t):pause()})),r.on("loadedmetadata",(function(){var e=r[0].duration;s.duration.text(formatTime(e)),currentTime&&(n||a.data("id")==currentId)&&(r[0].currentTime=currentTime,s.current.text(formatTime(currentTime))),r[0].addEventListener("timeupdate",(function(t){currentTime=t.target.currentTime,s.current.text(formatTime(currentTime)),c.css("width",currentTime/e*100+"%")}))})),f.on("click",(function(){r[0].currentTime=r[0].currentTime-10})),p.on("click",(function(){r[0].currentTime=r[0].currentTime+30})),m.on("click",(function(){d<2?d+=.5:d=1,r[0].playbackRate=d,m.text(d+"x")})),y.on("click",(function(){r[0].paused||pause(),html.removeClass("player-opened")}))}function play(e){currentId=e;var t=$(".audioPlayer").find("audio");if(t[0]){var a=t[0].play();void 0!==a&&a.then((function(){setPlayButtonState("pause",currentId),$(".loader:visible").hide(),$("i.fa:hidden").show(),playerPlaying=!0})).catch((function(e){console.log(e)}))}}function pause(){var e=$(".audioPlayer").find("audio");e[0]&&(e[0].pause(),setPlayButtonState("play",currentId),playerPlaying=!1)}function formatTime(e){return new Date(1e3*e).toISOString().substr(11,8)}function setPlayButtonState(e,t){var a="pause"==e?"play":"pause";$(".audioPlayer").find("i.fa-"+a).removeClass("fa-"+a).addClass("fa-"+e),$('.episode[data-id="'+t+'"]').find("i.fa-"+a).removeClass("fa-"+a).addClass("fa-"+e)}$((function(){"use strict";player(),document.addEventListener("swup:contentReplaced",e=>{$((function(){player(!0)}))})}));
//# sourceMappingURL=player.js.map