{{!< default}}

<div class="gh-page">
    <div class="gh-container">
        <div class="checkout-form">
            <h1 class="checkout-title">Join the Adventure!</h1>
            <p>Subscribe for free to receive regular updates, or become a patron to unlock additional members-only content and perks!</p>
            <h6>Sign up for a full year, and get a free month!</h6>
            <div class="plan-selector" title="Select Monthly/Yearly Plans">
                <span class="switch">&nbsp;</span>
            </div>
            <div class="checkout-box">
                <div class="checkout-plan plan-trainee">
                    <header class="plan-header">
                        <h3>Trainee</h3>
                        <strong>&nbsp;</strong><span>FREE</span><strong>&nbsp;</strong>
                    </header>
                    <div class="plan-content">
                        <b class="tagline">The right stuff!</b>
                        <p class="intro">As a Trainee, receive two free short stories, plus access to public and Trainee-level member content, including behind the scenes updates, sneak peeks at work in progress, and general updates.</p>
                        <b>Includes:</b>
                        <ul>
                            <li><i>Email newsletter with public and Trainee-level member content</i></li>
                            <li><i>Site membership with access to Trainee-level content</i></li>
                            <li><a href="javascript:scrollToStories()"><i>Two free sci-fi short stories!</i></a></li>
                        </ul>
                    </div>
                    <footer class="plan-footer subscribe-form">
                        {{> "subscribe-form"
                            form-only=true
                            form-class="become"
                            form-type="subscribe"
                            show-name=true
                            button-name="Join the Crew"
                            submit-text="confirm your subscription"
                        }}
                        <h6 class="fancy primary">You Rock!</h6>
                        <a class="manage primary" href="/account/">View Your Profile</a>
                    </footer>
                </div>
                <div class="checkout-plan plan-astronaut">
                    <header class="plan-header">
                        <h3>Astronaut</h3>
                        <span class="price"><span>$</span><strong>3</strong> / month</span>
                    </header>
                    <div class="plan-content">
                        <b class="tagline">Light that candle!</b>
                        <p class="intro">As an Astronaut, get Trainee-level access plus access to an audio fiction podcast, pre-release eBooks, and your name acknowledged as a supporter in work I publish while you're a member.</p>
                        <b>Includes:</b>
                        <ul>
                            <li><i>Pre-release eBook downloads</i></li>
                            <li><i>Your name acknowledged as a supporter</i></li>
                            <li>Email newsletter with public and member-exclusive content</li>
                            <li>Site membership with full access to member-exclusive content</li>
                            <li><a href="javascript:scrollToStories()">Two free sci-fi short stories!</a></li>
                        </ul>
                    </div>
                    <footer class="plan-footer">
                        <span class="monthly">
                            <a class="button upgrade primary fit">Upgrade to Astronaut</a>
                            <a class="button become primary fit">Chase the Stars</a>
                        </span>
                        <span class="yearly">
                            <a class="button upgrade primary fit">Upgrade to Astronaut</a>
                            <a class="button become primary fit">Chase the Stars</a>
                        </span>
                        <h6 class="fancy primary">You Rock!</h6>
                        <a class="manage primary" href="/account/">View Your Profile</a>
                    </footer>
                </div>
                <div class="checkout-plan plan-colonist">
                    <header class="plan-header">
                        <h3>Colonist</h3>
                        <span class="price"><span>$</span><strong>5</strong> / month</span>
                    </header>
                    <div class="plan-content">
                        <b class="tagline">Build a brave new world!</b>
                        <p class="intro">As a Colonist, get a year of access to all the Astronaut-level content and perks, and one month free!</p>
                        <b>Includes:</b>
                        <ul>
                            <li>Pre-release eBook downloads</li>
                            <li>A member-exclusive podcast featuring audio of completed short stories and novels, read by me</li>
                            <li>Your name acknowledged as a supporter</li>
                            <li>Email newsletter with public and member-exclusive content</li>
                            <li>Site membership with full access to member-exclusive content</li>
                            <li><a href="javascript:scrollToStories()">Two free sci-fi short stories!</a></li>
                        </ul>
                    </div>
                    <footer class="plan-footer">
                        <span class="monthly">
                            <a class="button upgrade primary fit">Upgrade to Colonist</a>
                            <a class="button become primary fit">Build a World</a>
                        </span>
                        <span class="yearly">
                            <a class="button upgrade primary fit">Upgrade to Colonist</a>
                            <a class="button become primary fit">Build a World</a>
                        </span>
                        <h6 class="fancy primary">You Rock!</h6>
                        <a class="manage primary" href="/account/">View Your Profile</a>
                    </footer>
                </div>
                <div class="checkout-plan plan-explorer">
                    <header class="plan-header">
                        <h3>Explorer</h3>
                        <span class="price"><span>$</span><strong>15</strong> / month</span>
                    </header>
                    <div class="plan-content">
                        <b class="tagline">See what's out there...</b>
                        <p class="intro">As an Explorer, get Astronaut-level content and perks, plus a signed paperback copy of any book I release with your support.</p>
                        <b>Includes:</b>
                        <ul>
                            <li><i>A signed paperback copy of any book(s) released while you're a member</i></li>
                            <li>Pre-release eBook downloads</li>
                            <li>A member-exclusive podcast featuring audio of completed short stories and novels, read by me</li>
                            <li>Your name acknowledged as a supporter</li>
                            <li>Email newsletter with public and member-exclusive content</li>
                            <li>Site membership with full access to member-exclusive content</li>
                            <li><a href="javascript:scrollToStories()">Two free sci-fi short stories!</a></li>
                        </ul>
                    </div>
                    <footer class="plan-footer">
                        <span class="monthly">
                            <a class="button upgrade primary fit">Upgrade to Explorer*</a>
                            <a class="button become primary fit">Push the Boundaries*</a>
                        </span>
                        <span class="yearly">
                            <a class="button upgrade primary fit">Upgrade to Explorer*</a>
                            <a class="button become primary fit">Push the Boundaries*</a>
                        </span>
                        <h6 class="fancy primary">You Rock!</h6>
                        <a class="manage primary" href="/account/">View Your Profile</a>
                    </footer>
                </div>
            </div>
            <p class="wide patreon-migration"><b>Ready to migrate your Patreon membership?</b> <a href="/account/#migrate-from-patreon">See your account page for more information.</a></p>
        </div>
        {{#unless @member }}
            <hr />
            {{> "subscribe-form"
                heading="Already have an account?"
                description="Sign into your account again for full access."
                form-type="signin"
                button-name="Send Login Link"
                success-text="finish your login"
            }}
        {{/unless}}
        {{> "free-stories"}}
    </div>
</div>
{{!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs --}}
{{#contentFor "scripts"}}
    {{> "member-helper-js"}}
    <script>
        /* Change Plan Plan
            1. Update "Join" page for complimentary members to include
                instructions for requesting cancellation of complimentary
                membership
            2. Update "Join" page for existing paid members to include instructions for
                for requesting cancellation of their current membership so they can re-sign-up
                under a different plan
        */
        var planPricing = {
            {{#foreach @products as |product|}}
                '{{product.name}}': {
                    'monthly': {
                        'id': '{{product.monthly_price.id}}',
                        'price': {{price product.monthly_price.amount}}
                    },
                    'yearly': {
                        'id': '{{product.yearly_price.id}}',
                        'price': {{price product.yearly_price.amount}}
                    }
                },
            {{/foreach}}
        }

        $(document).ready(function() {
            updatePlanPricing();
            $('.plan-selector').click(event => {
                $('.checkout-form').toggleClass('yearly');
                updatePlanPricing();
            });
        })

        function updatePlanPricing() {
            var showYearlyPricing = $('.checkout-form').hasClass('yearly');
            Object.keys(planPricing).forEach(key => {
                if (key.toLowerCase() !== 'matthew rasnake | author') {
                    var plan = showYearlyPricing ? planPricing[key].yearly : planPricing[key].monthly;
                    var period = showYearlyPricing ? 'year' : 'month'
                    var $planBox = $('div.plan-'+key.toLowerCase())
                    $planBox.find('.price').html(`<span>$</span><strong>${plan.price}</strong> / ${period}`);
                    $planBox
                        .find(`.plan-footer .${period}ly a.button`)
                        .attr('href',`/join/#/portal/signup/${plan.id}/${period}ly`);
                }
            });
        }
        function scrollToStories() {
            $('html, body').animate({
                scrollTop: parseInt($("div.free-stories").offset().top)
            }, 1000);
        };
        function scrollToTop() {
            $('html, body').animate({
                scrollTop: parseInt($(".checkout-title").offset().top)
            }, 1000);
        };
    </script>
{{/contentFor}}