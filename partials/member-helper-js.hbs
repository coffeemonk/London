{{#if @member}}
    <script src="https://cdn.jsdelivr.net/npm/hash-wasm@4/dist/md5.umd.min.js"></script>
    <script data-swup-reload-script>
        var planPricing = {
            {{#foreach @products as |product|}}
                '{{product.name}}': {
                    'monthly': {
                        'id': '{{product.monthly_price.id}}',
                        'price': {{price product.monthly_price.amount}}
                    },
                    'yearly': {
                        'id': '{{product.yearly_price.id}}',
                        'price': {{price product.yearly_price.amount}}
                    }
                },
            {{/foreach}}
        }
        var planNicks = {
            0: 'complimentary',
            {{#foreach @products as |product|}}
                [{{price product.monthly_price.amount}} * 100]: '{{product.name}}'.toLowerCase(),
                [{{price product.yearly_price.amount}} * 100]: '{{product.name}}'.toLowerCase(),
            {{/foreach}}
        }

        var member = {
            "name": "{{@member.firstname}}",
            "plan": "trainee",
            "paid": {{@member.paid}}
        }
        {{#if @member.paid}}
            {{#foreach @member.subscriptions}}
                member.plan = planNicks[{{plan.amount}}];
            {{/foreach}}
        {{/if}}

        $(document).ready(function() {
            // update page classes
            $('body').addClass(`member ${member.plan}`);

            // handle page-specific update
            if (typeof memberPageUpdates == 'function') {
                memberPageUpdates();
            }
        })

    </script>
{{/if}}